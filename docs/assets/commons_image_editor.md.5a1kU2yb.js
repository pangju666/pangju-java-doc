import{_ as i,c as a,o as t,ag as l}from"./chunks/framework.XA8aHGu3.js";const e="/pangju-java-doc/test.png",n="/pangju-java-doc/thumbnail.png",y=JSON.parse('{"title":"图像处理","description":"","frontmatter":{"layout":"doc"},"headers":[],"relativePath":"commons/image/editor.md","filePath":"commons/image/editor.md","lastUpdated":1764207802000}'),h={name:"commons/image/editor.md"};function p(k,s,E,d,r,g){return t(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="图像处理" tabindex="-1">图像处理 <a class="header-anchor" href="#图像处理" aria-label="Permalink to &quot;图像处理&quot;">​</a></h1><p><code>io.github.pangju666.commons.image.utils.ImageEditor</code></p><p>本类提供了流式API来处理图像，支持链式方法调用以配置各种参数。 可以轻松实现图像的缩放、旋转、滤镜效果等多种处理操作。</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>基于<code>twelvemonkeys</code>实现，速度和质量都挺不错的，纯Java实现里我觉得这个是最好用的。</p><p>推荐调用顺序：裁剪 -&gt; 缩放 -&gt; 旋转 -&gt; 翻转 -&gt; 灰度化 -&gt; 调整亮度 -&gt; 调整对比度 -&gt; 锐化或模糊（这两个效果互斥，一般不会同时用） -&gt; 滤镜 -&gt; 添加水印</p></div><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>注意事项：</p><ul><li>默认使用<code>Lanczos</code>插值（高质量）滤波器</li><li>从文件构造时会自动将输出格式设置为输入文件格式</li><li>默认输出格式根据输入图像是否有透明通道自动选择（<code>PNG</code>或<code>JPEG</code>）</li><li>不支持透明的格式（如<code>JPEG</code>）会自动转换为RGB模式</li><li>可以使用<code>restore()</code>方法恢复到原始图像状态</li><li>处理大量图像时，建议在使用完毕后显式关闭相关资源</li><li>图像处理操作会按照调用顺序依次应用</li></ul></div><table tabindex="0"><thead><tr><th>方法名</th><th style="text-align:left;">返回值</th><th style="text-align:center;">用途</th></tr></thead><tbody><tr><td>of</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">创建缩略图生成器</td></tr><tr><td>resampleFilterType</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">设置重采样滤波器类型</td></tr><tr><td>outputFormat</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">设置输出图像的格式</td></tr><tr><td>correctOrientation</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">根据EXIF方向信息校正图像方向</td></tr><tr><td>rotate</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">旋转图像</td></tr><tr><td>blur</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">对图像应用模糊效果</td></tr><tr><td>flip</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">翻转图像</td></tr><tr><td>sharpen</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">对图像应用锐化效果</td></tr><tr><td>grayscale</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">将图像转换为灰度图</td></tr><tr><td>contrast</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">调整图像对比度</td></tr><tr><td>cropByCenter</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">居中裁剪为指定尺寸</td></tr><tr><td>cropByOffset</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">按边距偏移进行裁剪</td></tr><tr><td>cropByRect</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">按矩形区域进行裁剪</td></tr><tr><td>brightness</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">调整图像亮度</td></tr><tr><td>filter</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">对图像应用自定义滤镜</td></tr><tr><td>resize</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">强制将图像缩放到指定的尺寸，不保持原始宽高比</td></tr><tr><td>scaleByWidth</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">按指定宽度等比例缩放图像，保持原始宽高比</td></tr><tr><td>scaleByHeight</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">按指定高度等比例缩放图像，保持原始宽高比</td></tr><tr><td>scale</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">将图像缩放到指定的最大宽度和最大高度范围内，保持原始宽高比</td></tr><tr><td>addImageWatermark</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">添加图片水印</td></tr><tr><td>addTextWatermark</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">添加文字水印</td></tr><tr><td>restore</td><td style="text-align:left;">ImageEditor</td><td style="text-align:center;">恢复图像到初始状态，重置所有处理效果</td></tr><tr><td>toFile</td><td style="text-align:left;">void</td><td style="text-align:center;">将处理后的图像保存到文件</td></tr><tr><td>toOutputStream</td><td style="text-align:left;">void</td><td style="text-align:center;">将处理后的图像写入输出流</td></tr><tr><td>toImageOutputStream</td><td style="text-align:left;">void</td><td style="text-align:center;">将处理后的图像写入图像输出流</td></tr><tr><td>toBufferedImage</td><td style="text-align:left;">void</td><td style="text-align:center;">获取处理后图像的副本</td></tr></tbody></table><h2 id="实例化" tabindex="-1">实例化 <a class="header-anchor" href="#实例化" aria-label="Permalink to &quot;实例化&quot;">​</a></h2><p>支持从<code>URL</code>、文件、输入流、图像输入流、<code>BufferImage</code>几种方式读取。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">URL imageUrl;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageUrl);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认不开启自动矫正方向</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 开启自动矫正方向</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">InputStream imageInputStream;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认不开启自动矫正方向</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageInputStream);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 开启自动矫正方向</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageInputStream, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageInputStream imageInputStream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageUrl);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BufferedImage image;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(image);</span></span></code></pre></div><h2 id="设置重采样滤波器类型" tabindex="-1">设置重采样滤波器类型 <a class="header-anchor" href="#设置重采样滤波器类型" aria-label="Permalink to &quot;设置重采样滤波器类型&quot;">​</a></h2><p>默认是<code>Lanczos 插值（高质量）滤波器</code>，建议不要乱改，有些滤波器会无法生成部分图像。</p><p>支持以下滤波器：</p><ul><li>ResampleOp.FILTER_UNDEFINED：未定义插值法，滤波方法将使用默认滤波器。</li><li>ResampleOp.FILTER_POINT：点插值法（也称为 &quot;近邻插值&quot;）。 速度非常快，但质量较低（类似于<code>RenderingHints.VALUE_INTERPOLATION_NEAREST_NEIGHBOR</code>和<code>Image.SCALE_REPLICATE</code>）</li><li>ResampleOp.FILTER_BOX：盒式插值法。速度快，但质量低。</li><li>ResampleOp.FILTER_TRIANGLE：三角形插值法（也称为 &quot;线性 &quot;或 &quot;双线性&quot;）。 速度相当快，质量可以接受（类似于<code>RenderingHints.VALUE_INTERPOLATION_BILINEAR</code>和<code>Image.SCALE_AREA_AVERAGING</code>）。</li><li>ResampleOp.FILTER_HERMITE：Hermite 插值法。</li><li>ResampleOp.FILTER_HANNING：Hanning 插值法。</li><li>ResampleOp.FILTER_HAMMING：Hamming 插值法。</li><li>ResampleOp.FILTER_BLACKMAN：Blackman 插值法。</li><li>ResampleOp.FILTER_GAUSSIAN：高斯插值法。</li><li>ResampleOp.FILTER_QUADRATIC：二次插值法。</li><li>ResampleOp.FILTER_CUBIC：三次插值。</li><li>ResampleOp.FILTER_CATROM：Catrom 插值法。</li><li>ResampleOp.FILTER_MITCHELL：Mitchell 插值法（高质量）。</li><li>ResampleOp.FILTER_LANCZOS：Lanczos 插值法（高质量）。</li><li>ResampleOp.FILTER_BLACKMAN_BESSEL：Blackman-Bessel 插值法（高质量）。</li><li>ResampleOp.FILTER_BLACKMAN_SINC：Blackman-Sinc 插值法（高质量）。</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resampleFilterType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ResampleOp.FILTER_LANCZOS);</span></span></code></pre></div><h2 id="设置输出图像的格式" tabindex="-1">设置输出图像的格式 <a class="header-anchor" href="#设置输出图像的格式" aria-label="Permalink to &quot;设置输出图像的格式&quot;">​</a></h2><p>只能设置为<code>ImageIO</code>支持写入的格式。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">outputFormat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="校正图像方向" tabindex="-1">校正图像方向 <a class="header-anchor" href="#校正图像方向" aria-label="Permalink to &quot;校正图像方向&quot;">​</a></h2><p>根据EXIF方向信息校正图像方向。</p><p>根据EXIF标准，方向值范围为1-8：</p><ul><li>1: 正常方向 (不需要校正)。</li><li>2: 水平翻转。</li><li>3: 旋转180度。</li><li>4: 垂直翻转。</li><li>5: 顺时针旋转90度后水平翻转。</li><li>6: 顺时针旋转90度。</li><li>7: 逆时针旋转90度后水平翻转。</li><li>8: 逆时针旋转90度。</li></ul><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>对于方向值5-8，会同时调整输出图像的宽高比例。</p></div><h2 id="旋转" tabindex="-1">旋转 <a class="header-anchor" href="#旋转" aria-label="Permalink to &quot;旋转&quot;">​</a></h2><p>支持根据方向或角度两种旋转方式，方向值：</p><ul><li>ImageUtil.ROTATE_90_CW：顺时针旋转90度</li><li>ImageUtil.ROTATE_90_CCW：逆时针旋转90度</li><li>ImageUtil.ROTATE_180：旋转180度</li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ImageUtil.ROTATE_90_CW); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 顺时针旋转90度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">45.0d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 顺时针旋转45度</span></span></code></pre></div><h2 id="模糊" tabindex="-1">模糊 <a class="header-anchor" href="#模糊" aria-label="Permalink to &quot;模糊&quot;">​</a></h2><p>对图像应用模糊效果，模糊程度小于等于1则没有效果。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认模糊程度为1.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blur</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100.0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 模糊程度为100</span></span></code></pre></div><h2 id="翻转" tabindex="-1">翻转 <a class="header-anchor" href="#翻转" aria-label="Permalink to &quot;翻转&quot;">​</a></h2><p>翻转图像。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ImageUtil.FLIP_HORIZONTA); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 水平翻转</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ImageUtil.FLIP_VERTICAL); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 垂直翻转</span></span></code></pre></div><h2 id="锐化" tabindex="-1">锐化 <a class="header-anchor" href="#锐化" aria-label="Permalink to &quot;锐化&quot;">​</a></h2><p>对图像应用锐化效果，锐化强度等于0则没有效果。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sharpen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认锐化强度为0.3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sharpen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 锐化强度为10</span></span></code></pre></div><h2 id="灰度化" tabindex="-1">灰度化 <a class="header-anchor" href="#灰度化" aria-label="Permalink to &quot;灰度化&quot;">​</a></h2><p>将图像转换为灰度图。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grayscale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h2 id="调整对比度" tabindex="-1">调整对比度 <a class="header-anchor" href="#调整对比度" aria-label="Permalink to &quot;调整对比度&quot;">​</a></h2><p>调整图像对比度，范围为-1.0到1.0，0表示不变，正值增加对比度，负值降低对比度。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contrast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 默认对比度增加0.3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contrast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对比度增加10</span></span></code></pre></div><h2 id="调整亮度" tabindex="-1">调整亮度 <a class="header-anchor" href="#调整亮度" aria-label="Permalink to &quot;调整亮度&quot;">​</a></h2><p>调整图像亮度，范围为-2.0到2.0，0表示不变，正值增加亮度，负值降低亮度。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brightness</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10.0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 亮度增加10</span></span></code></pre></div><h2 id="滤镜" tabindex="-1">滤镜 <a class="header-anchor" href="#滤镜" aria-label="Permalink to &quot;滤镜&quot;">​</a></h2><p>对图像应用自定义过滤器。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GrayFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对图像使用灰度化滤镜</span></span></code></pre></div><h2 id="强制缩放" tabindex="-1">强制缩放 <a class="header-anchor" href="#强制缩放" aria-label="Permalink to &quot;强制缩放&quot;">​</a></h2><p>强制将图像缩放到指定的宽度和高度，不保持原始宽高比。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 强制将图像缩放为500x500</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ImageSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 强制将图像缩放为500x500</span></span></code></pre></div><h2 id="等比例缩放" tabindex="-1">等比例缩放 <a class="header-anchor" href="#等比例缩放" aria-label="Permalink to &quot;等比例缩放&quot;">​</a></h2><p>双约束缩放规则：</p><ol><li>在不超过目标宽高的前提下保持宽高比</li><li>优先适配宽度计算</li><li>若高度超出则改为适配高度</li><li>确保最小1像素</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scaleByWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按500宽度等比例缩放图像，保持原始宽高比</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scaleByHeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 按500高度等比例缩放图像，保持原始宽高比</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将图像缩放到500x400范围内，保持原始宽高比</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将图像缩放到原本的0.5倍</span></span></code></pre></div><p>缩放效果图：</p><p><img src="`+e+'" alt="原始图片"></p><p><img src="'+n+`" alt="缩略图"></p><h2 id="水印" tabindex="-1">水印 <a class="header-anchor" href="#水印" aria-label="Permalink to &quot;水印&quot;">​</a></h2><h3 id="图片水印" tabindex="-1">图片水印 <a class="header-anchor" href="#图片水印" aria-label="Permalink to &quot;图片水印&quot;">​</a></h3><p>图像水印方向，请参考<a href="/pangju-java-doc/commons/image/enums.html#水印方向">文档</a></p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>大型图片建议先缩放再增加水印</p></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File watermarkFile;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageWatermarkOption watermarkOption </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ImageWatermarkOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置水印的相对缩放比例（相对原图尺寸），默认为 0.15，必须大于0，建议不要超过1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setRelativeScale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.15f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置水印的水印透明度，默认为 0.4，有效范围为 [0.0f, 1.0f]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOpacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.4f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置水印宽度的有效范围（像素），默认为 40-200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setWidthRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置水印高度的有效范围（像素），默认为 40-200</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeightRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在图片右上角增加水印</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addImageWatermark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(watermarkFile, watermarkOption, WatermarkDirection.TOP_RIGHT); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在图片 100,100 位置处增加水印</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addImageWatermark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(watermarkFile, watermarkOption, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 也支持传入 BufferedImage</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addImageWatermark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ImageIO.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(watermarkFile), watermarkOption, WatermarkDirection.TOP_RIGHT);</span></span></code></pre></div><h3 id="文字水印" tabindex="-1">文字水印 <a class="header-anchor" href="#文字水印" aria-label="Permalink to &quot;文字水印&quot;">​</a></h3><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>大型图片建议先缩放再增加水印</p></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TextWatermarkOption watermarkOption </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextWatermarkOption</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体填充颜色，默认为白色</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFillColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.15f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体描边颜色，默认为浅灰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStrokeColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.4f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体名称，默认为 SansSerif</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFontName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Font.SANS_SERIF);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体样式，默认为 PLAIN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFontStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Font.PLAIN);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置字体名称，默认为 0.04</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFontSizeRatio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.04</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置描边线宽，默认为3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStrokeWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置启用描边功能</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStroke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置水印的水印透明度，默认为 0.4，有效范围为 [0.0f, 1.0f]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">watermarkOption.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setOpacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.4f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在图片右上角增加水印</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addImageWatermark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;测试水印&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, watermarkOption, WatermarkDirection.TOP_RIGHT); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在图片 100,100 位置处增加水印</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addImageWatermark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;测试水印&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, watermarkOption, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="裁剪" tabindex="-1">裁剪 <a class="header-anchor" href="#裁剪" aria-label="Permalink to &quot;裁剪&quot;">​</a></h2><p>我提供了三种不同的裁剪方式。</p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>如果裁剪区域大于等于图片本身的宽高则不生效。</p></div><h3 id="居中裁剪为指定尺寸" tabindex="-1">居中裁剪为指定尺寸 <a class="header-anchor" href="#居中裁剪为指定尺寸" aria-label="Permalink to &quot;居中裁剪为指定尺寸&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cropByCenter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 以图像中心为原点裁剪500x500的区域</span></span></code></pre></div><h3 id="按边距偏移进行裁剪" tabindex="-1">按边距偏移进行裁剪 <a class="header-anchor" href="#按边距偏移进行裁剪" aria-label="Permalink to &quot;按边距偏移进行裁剪&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cropByOffset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 裁剪以图像上下左右四个方向各偏移100像素的区域</span></span></code></pre></div><h3 id="按矩形区域进行裁剪" tabindex="-1">按矩形区域进行裁剪 <a class="header-anchor" href="#按矩形区域进行裁剪" aria-label="Permalink to &quot;按矩形区域进行裁剪&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cropByRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 以图像100,100的位置为原点裁剪500x500的区域</span></span></code></pre></div><h2 id="重置" tabindex="-1">重置 <a class="header-anchor" href="#重置" aria-label="Permalink to &quot;重置&quot;">​</a></h2><p>恢复图像到初始状态，重置所有处理效果。</p><p>此方法会将输出图像重置为输入图像，并恢复默认设置。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">restore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 重置图像所有处理效果</span></span></code></pre></div><h2 id="输出" tabindex="-1">输出 <a class="header-anchor" href="#输出" aria-label="Permalink to &quot;输出&quot;">​</a></h2><h3 id="直接获取输出图像" tabindex="-1">直接获取输出图像 <a class="header-anchor" href="#直接获取输出图像" aria-label="Permalink to &quot;直接获取输出图像&quot;">​</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BufferedImage image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toBufferedImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="输出到文件" tabindex="-1">输出到文件 <a class="header-anchor" href="#输出到文件" aria-label="Permalink to &quot;输出到文件&quot;">​</a></h3><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>输出格式需要通过outputFormat()方法设置，不会根据文件后缀自动获取</p></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File outputFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(outputFile);</span></span></code></pre></div><h3 id="输出到流" tabindex="-1">输出到流 <a class="header-anchor" href="#输出到流" aria-label="Permalink to &quot;输出到流&quot;">​</a></h3><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>需要调用者自己关闭输出流。</p></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OutputStream outputStream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(outputStream);</span></span></code></pre></div><h3 id="输出到图像输出流" tabindex="-1">输出到图像输出流 <a class="header-anchor" href="#输出到图像输出流" aria-label="Permalink to &quot;输出到图像输出流&quot;">​</a></h3><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>需要调用者自己关闭图像输出流。</p></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File imageFile;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageOutputStream outputStream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ImageEditor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageFile).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toImageOutputStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(outputStream);</span></span></code></pre></div>`,90)])])}const c=i(h,[["render",p]]);export{y as __pageData,c as default};
