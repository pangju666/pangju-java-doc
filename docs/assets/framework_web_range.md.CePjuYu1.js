import{_ as e,c as s,o as a,ag as i}from"./chunks/framework.XA8aHGu3.js";const c=JSON.parse('{"title":"Http响应工具类","description":"","frontmatter":{"layout":"doc"},"headers":[],"relativePath":"framework/web/range.md","filePath":"framework/web/range.md","lastUpdated":1762179755000}'),l={name:"framework/web/range.md"};function n(d,t,p,r,o,h){return a(),s("div",null,[...t[0]||(t[0]=[i(`<h1 id="http响应工具类" tabindex="-1">Http响应工具类 <a class="header-anchor" href="#http响应工具类" aria-label="Permalink to &quot;Http响应工具类&quot;">​</a></h1><p><code>io.github.pangju666.framework.web.servlet.utils.RangeDownloadUtils</code></p><p>这个工具类主要就一个方法<code>download</code>，其他都是我暴露出去方便用户自己处理分片下载的。</p><p>常见Range请求头格式：</p><ul><li>bytes=0-499：请求前500字节</li><li>bytes=500-999：请求第500-999字节</li><li>bytes=0-499, 1000-1499：请求多个区间（多范围）</li><li>bytes=500-：请求第500字节到结尾</li><li>bytes=-500：请求最后 500 个字节</li></ul><table tabindex="0"><thead><tr><th>方法名</th><th style="text-align:left;">返回值</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td>download</td><td style="text-align:left;">void</td><td style="text-align:center;">支持分片的下载请求处理</td></tr><tr><td>getRanges</td><td style="text-align:left;">List&lt;Range&gt;</td><td style="text-align:center;">解析和验证范围请求</td></tr><tr><td>writeRangesToResponse</td><td style="text-align:left;">void</td><td style="text-align:center;">将文件分片内容写入响应</td></tr><tr><td>writeRangeHeaders</td><td style="text-align:left;">void</td><td style="text-align:center;">写入响应的分片头信息</td></tr></tbody></table><h2 id="字节数组分片" tabindex="-1">字节数组分片 <a class="header-anchor" href="#字节数组分片" aria-label="Permalink to &quot;字节数组分片&quot;">​</a></h2><p>支持分片的字节数组下载处理，处理流程：</p><ol><li>检查请求中是否包含<code>Range</code>请求头</li><li>如果没有<code>Range</code>请求头，则返回完整字节数组</li><li>如果有<code>Range</code>请求头，解析请求的范围</li><li>验证请求范围的有效性</li><li>返回请求范围的字节数据</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] bytes; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求下载的字节数组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HttpServletRequest request; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HttpServletResponse response; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 响应信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RangeDownloadUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">download</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bytes, request, response);</span></span></code></pre></div><h2 id="文件分片" tabindex="-1">文件分片 <a class="header-anchor" href="#文件分片" aria-label="Permalink to &quot;文件分片&quot;">​</a></h2><p>支持分片的文件下载处理，处理流程：</p><ol><li>检查请求中是否包含<code>Range</code>请求头</li><li>如果没有<code>Range</code>请求头，则返回完整字节数组</li><li>如果有<code>Range</code>请求头，解析请求的范围</li><li>验证请求范围的有效性</li><li>返回请求范围的文件数据</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">File file; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求下载的文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HttpServletRequest request; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 请求信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HttpServletResponse response; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 响应信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RangeDownloadUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">download</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bytes, request, response);</span></span></code></pre></div>`,14)])])}const g=e(l,[["render",n]]);export{c as __pageData,g as default};
