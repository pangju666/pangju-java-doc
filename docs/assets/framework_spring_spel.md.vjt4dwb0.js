import{_ as i,c as t,o as a,ag as e}from"./chunks/framework.XA8aHGu3.js";const o=JSON.parse('{"title":"SpEL","description":"","frontmatter":{"layout":"doc"},"headers":[],"relativePath":"framework/spring/spel.md","filePath":"framework/spring/spel.md","lastUpdated":1761995232000}'),n={name:"framework/spring/spel.md"};function l(h,s,p,k,r,d){return a(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="spel" tabindex="-1">SpEL <a class="header-anchor" href="#spel" aria-label="Permalink to &quot;SpEL&quot;">​</a></h1><h2 id="工具类" tabindex="-1">工具类 <a class="header-anchor" href="#工具类" aria-label="Permalink to &quot;工具类&quot;">​</a></h2><p><code>io.github.pangju666.framework.spring.utils.SpELUtils</code></p><p>这个工具类主要是用来辅助使用SpEL表达式的，封装了一些样板式代码。</p><table tabindex="0"><thead><tr><th>属性名</th><th style="text-align:left;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td>DEFAULT_EXPRESSION_PARSER</td><td style="text-align:left;">SpelExpressionParser</td><td style="text-align:center;">默认的SpEL表达式解析器</td></tr><tr><td>DEFAULT_EVALUATION_CONTEXT</td><td style="text-align:left;">StandardEvaluationContext</td><td style="text-align:center;">默认的表达式计算上下文</td></tr></tbody></table><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p><code>DEFAULT_EVALUATION_CONTEXT</code>是共享的，修改其中变量会影响其他使用方。</p></div><table tabindex="0"><thead><tr><th>方法名</th><th style="text-align:left;">返回值</th><th style="text-align:center;">用途</th></tr></thead><tbody><tr><td>initEvaluationContext</td><td style="text-align:left;">MethodBasedEvaluationContext</td><td style="text-align:center;">初始化基于方法的表达式计算上下文</td></tr></tbody></table><h3 id="初始化上下文" tabindex="-1">初始化上下文 <a class="header-anchor" href="#初始化上下文" aria-label="Permalink to &quot;初始化上下文&quot;">​</a></h3><p>一般来说都是在切面中使用，所以我给的实例也是基于切面</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestAspect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParameterNameDiscoverer discoverer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultParameterNameDiscoverer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doBefore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(JoinPoint </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MethodSignature methodSignature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (MethodSignature) point.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSignature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Method method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> methodSignature.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        MethodBasedEvaluationContext context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpELUtils.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initEvaluationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(method, point.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getArgs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), discoverer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div>`,10)])])}const g=i(n,[["render",l]]);export{o as __pageData,g as default};
